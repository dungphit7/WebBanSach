

@model IEnumerable<Webbansach.Models.DonHang>

@{
    ViewBag.Title = "Đơn hàng của tôi";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5">
    <h2 class="text-primary border-bottom pb-2">Lịch sử mua hàng</h2>

    @if (!Model.Any())
    {
        <div class="alert alert-warning mt-3">
            Bạn chưa có đơn hàng nào. <a href="/Saches/Index">Mua sắm ngay!</a>
        </div>
    }
    else
    {
        <table class="table table-hover mt-3 shadow-sm">
            <thead class="bg-light">
                <tr>
                    <th>Mã đơn</th>
                    <th>Ngày đặt</th>
                    <th>Tổng tiền</th>
                    <th>Trạng thái</th>
                    <th>Chi tiết</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>#@item.MaDonHang</td>
                        <td>
                            @(item.NgayDat != null
                                ? item.NgayDat.Value.ToString("dd/MM/yyyy HH:mm")
                                : "")
                        </td>
                        <td class="text-danger fw-bold">
                            @(item.TongTien != null
                            ? (item.TongTien.Value.ToString("N0") + ",000")
                            : "0") đ
                        </td>


                        <td>
                            @if (item.TrangThai == "Đã giao")
                            {
                                <span class="badge bg-success">@item.TrangThai</span>
                            }
                            else if (item.TrangThai == "Đã hủy")
                            {
                                <span class="badge bg-danger">@item.TrangThai</span>
                            }
                            else
                            {
                                <span class="badge bg-warning text-dark">@item.TrangThai</span>
                            }
                        </td>
                        <td>
                            <a href="@Url.Action("Details", "DonHangs", new { id = item.MaDonHang })" class="btn btn-sm btn-outline-info">Xem</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>


